<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Front-end developer Project 5">
    <!--link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"-->
    <style type="text/css">
#alertbox,#alertbox>div,#alertbox>div>#alertboxbody,#alertbox>div>#alertboxfoot,#alertbox>div>#alertboxhead,#alertoverlay,.viewport{background-attachment:initial;background-origin:initial;background-clip:initial;background-position:initial initial;background-repeat:initial initial}.greytext,.longtext,li{text-overflow:ellipsis}.longtext,li{overflow-x:hidden}.mycategories,.results{border-radius:5px}*{font-family:Roboto,sans-serif}body,html{height:100%;margin:0;padding:0}button{width:32px;height:32px}h2{font-size:22px;text-align:center;margin:15px}h3{font-size:15px;color:#5a6065;margin:1px}ul{list-style-type:none;height:98%;overflow-y:scroll;padding:0;margin:0 3px}li{background-color:#f1f1f1;overflow-y:hidden;padding:10px}p{margin:0 0 0 6px}strong{color:#787676}[group~=controls]{position:absolute;background-color:#fff}[group~=hz-buttons]{z-index:105;top:0;display:inline;position:absolute;left:50%;margin:0 5px}[group~=lists],[group~=review-lists]{background-color:#fffae3;top:40px;height:90%;left:10%;position:absolute}[group~=review-lists]{max-width:80%;padding:10px}[group~=lists]{max-width:60%;font-size:16px;padding:10px 20px 0}[group~=closeButton]{position:absolute;z-index:110;top:50px;left:20px;width:40px;height:40px}[group~=backward],[group~=forward]{top:50%;height:40px;width:40px;position:absolute;z-index:110}[group~=backward]{left:15%}[group~=forward]{right:15%}[type~=core]{background-color:#4b86b4;color:#fff;height:40px;width:40px;border-width:initial;border-color:initial;margin:0;padding:0;border-style:none}#map-canvas,.viewport{height:100%}#search-input,.viewport{width:100%}#search-box{display:inline;width:45%;line-height:32px;top:0;left:5%;z-index:105}.article,.select{display:block}#photoCounter{width:20%;font-size:25px;color:#000;left:45%;position:absolute;z-index:110;bottom:5%}#btn-toolbar{left:2px;bottom:7%;background-color:#8bb2d2;border-style:initial;border-color:initial;border-width:0}.p2{font-size:20px;font-weight:700;padding:10px}.review-title{font-size:15px;height:10%}.results{width:25%;height:72%;z-index:105;position:fixed;top:0;right:0;background-color:#fff;box-shadow:rgba(0,0,0,.296875) 0 2px 6px}.hide-result{z-index:105;top:0;right:10px}.mylist{overflow-y:scroll;max-height:80%}.mylist::-webkit-scrollbar{width:12px;overflow-x:visible;overflow-y:visible;background-color:#fff;margin:10px}.mylist::-webkit-scrollbar-thumb{background-color:#4b86b4;height:20px;box-shadow:rgba(0,0,0,.199219) 1px 1px 0 inset,rgba(0,0,0,.0976562) 0 -1px 0 inset}.viewport{position:absolute;z-index:106;top:0;background-image:-webkit-linear-gradient(left,rgba(216,224,222,.597656) 10%,rgba(189,203,200,.648438) 14%,rgba(174,191,188,.699219) 22%,rgba(153,175,171,.746094) 33%,rgba(142,166,162,.796875) 50%,rgba(130,157,152,.847656) 67%,rgba(78,92,90,.886719) 82%,#0e0e0e 100%);background-color:initial}#alertbox,#alertbox>div,#alertbox>div>#alertboxbody,#alertbox>div>#alertboxfoot,#alertbox>div>#alertboxhead,#alertoverlay{background-image:initial}.btn-toolbar-img{margin:5px}.longtext{white-space:nowrap;overflow-y:hidden;font-size:16px}.infolist,.list-review{overflow-y:scroll;padding:2px;overflow-x:hidden}.article{font-size:18px}.infolist{font-size:13px;max-height:72%;margin:5px 0}img.photo,img.street-view{margin-left:auto;margin-right:auto;position:absolute;display:block}.list-review{font-size:14px}.greytext,.info-header{font-size:16px}.infolist::-webkit-scrollbar-thumb,.list-review::-webkit-scrollbar-thumb{background-color:#4b86b4;height:30px;box-shadow:rgba(0,0,0,.199219) 1px 1px 0 inset,rgba(0,0,0,.0976562) 0 -1px 0 inset}.infolist li{margin-bottom:4px;color:#989696;padding:0 2px 3px}.list-review li{margin-bottom:6px;color:#989696;background-color:#fffae3;padding:2px 2px 3px}.col-md-8{padding-left:5px;height:inherit}.col-md-4{padding-right:5px;height:inherit}img.photo{max-height:60%;max-width:60%;top:25%;left:20%}img.street-view{max-height:80%;max-width:80%;top:10%;left:10%}.navButton{width:32px;height:32px;position:absolute;z-index:110}.btn-toolbar-img{width:20px}.btn{width:40px;padding:4px}.rate-star{height:14px;padding:1px 0 2px}.rating-number{color:#df6d15;padding-right:3px;vertical-align:middle;margin-left:6px}.greytext{overflow-x:hidden;overflow-y:hidden;float:left;color:#989696;vertical-align:middle;margin-left:20px;padding-bottom:15px}.row{margin-top:3px}.list-review{width:95%;height:70%;margin:0 2.5%}.list-photo{width:100%}.logo{float:right;font-size:11px;color:#767676;margin-top:15px}#location,.mycategories{top:50px;left:40%;z-index:106;padding:0;margin:0}.nytimes-header,.wiki-header{font-size:16px;font-weight:700}#location{width:30%;max-width:250px;height:230px;font-size:14px}#location-list{background-color:#fffae3;width:100%;height:100%;list-style:none}#location-list li{position:relative;font-size:14px;border-bottom-width:2px;border-bottom-style:solid;border-bottom-color:#ededed}#location-list li label{color:#a9a9a9;white-space:pre-line;word-break:break-all;margin-left:35px;line-height:1.2;padding:0 0 0 10px}#location-list li .toggle{text-align:center;width:24px;height:auto;position:absolute;top:0;bottom:0;border-width:initial;border-color:initial;-webkit-appearance:none;margin:auto 0;border-style:none}#location-list li .toggle::after{content:url('data:image/svg+xml;utf8,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%2240%22%20height=%2240%22%20viewBox=%22-10%20-18%20100%20135%22%3E%3Ccircle%20cx=%2250%22%20cy=%2250%22%20r=%2250%22%20fill=%22none%22%20stroke=%22#ededed" stroke-width="3"/></svg>')}#location-list li .destroy{display:none;position:absolute;top:0;right:10px;bottom:0;width:26px;height:26px;font-size:18px;color:#cc9a9a;margin:auto 0 5px}#alertbox,#alertoverlay{display:none;position:fixed;z-index:110}#location-list li .destroy::after{content:✖}#alertoverlay{opacity:.8;top:0;left:0;background-color:#fff;width:100%}#alertbox{background-color:#000;top:30%;left:25%;width:50%;border-radius:7px}#alertbox>div{background-color:#fff;margin:8px}#alertbox>div>#alertboxhead{background-color:#4b86b4;font-size:19px;color:#ccc;padding:10px}#alertbox>div>#alertboxbody{background-color:#333;color:#fff;padding:20px}#alertbox>div>#alertboxfoot{background-color:#4b86b4;text-align:right;padding:10px}@media screen and (min-width:1170px){.results{width:22%;max-width:350px}}@media screen and (max-width:1169px) and (min-width:750px){.results{width:23%;max-width:350px;height:65%}#photoCounter{bottom:2%;font-size:18px}.col-md-2,.col-md-4{display:none}#btn-toolbar{bottom:7%}.btn-toolbar-img{width:20px}.btn{padding:5px}.infolist{max-height:65%;font-size:11px}.article,.nytimes-header,.wiki-header{font-size:14px}button{width:30px;height:30px}.p2{font-size:18px;font-weight:700}h2,h3{font-size:1.1em}}@media screen and (max-width:749px){.col-md-2,.col-md-4{display:none}.results{width:27%;max-width:350px;height:65%}[type~=core]{background-color:#4b86b4;color:#fff;height:35px;width:35px}#location{left:15%;width:70%}.info-header,[group~=lists]{font-size:14px}.review-title{font-size:13px;height:10%}button{width:26px;height:26px}}
</style>
<script id="loadcss">
(function(u,s){!function(e){"use strict";var n=function(n,t,o){var l,r=e.document,i=r.createElement("link");if(t)l=t;else{var a=(r.body||r.getElementsByTagName("head")[0]).childNodes;l=a[a.length-1]}var d=r.styleSheets;i.rel="stylesheet",i.href=n,i.media="only x",l.parentNode.insertBefore(i,t?l:l.nextSibling);var f=function(e){for(var n=i.href,t=d.length;t--;)if(d[t].href===n)return e();setTimeout(function(){f(e)})};return i.onloadcssdefined=f,f(function(){i.media=o||"all"}),i};"undefined"!=typeof module?module.exports=n:e.loadCSS=n}("undefined"!=typeof global?global:this);for(var i in u){loadCSS(u[i],s);}}(['css/bootstrap.min.css','css/style.css'],document.getElementById("loadcss")));
</script>
<noscript>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/style.css" media="screen" title="no title">
</noscript>
    
    <meta name="author" content="Paul Matencio">
    <title>Project 5 Neighborhood-Map</title>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js" async></script>
</head>

<body>
    <!--div tag that holds the google map-->
    <div id="map-canvas"></div>

    <!--  search box -->
    <div id="search-box" group="controls">
        <input id="search-input" type="text" data-bind="value: keyword, valueUpdate: 'afterkeydown', enterKey: getPlace" placeholder="Looking for places (separated by blank)  or :location ...">
    </div>
    <div group="hz-buttons">
        <button type="core" data-bind="click: $root.toggleLocation" class="hz-button">
            <span style="font-size: 24px;"> ☰</span>
        </button>
        <button type="core" data-bind="click: $root.toggleCategory" class="hz-button">
            <span style="font-size: 24px;"> ⊕ </span>
        </button>
        <!--button type="core" data-bind="click: $root.resetIcons" class="hz-button">
             <span> ⚡⚡</span>
        </button-->
    </div>

    <div id="options" style="display: none;">
        <!-- location list-->
        <div data-bind="visible: $root.showLocation || Locations().length > 0">
            <div id="location" group="controls">
                <ul id="location-list" group="controls" data-bind="foreach: $root.filteredLocations">
                    <span data-bind="with:$parent.displayLocation($data)"></span>
                    <li data-bind="css:{selected:selected}">
                        <button class="destroy" data-bind="click: $root.removeLocation"></button>
                        <input class="toggle" data-bind="checked: $data.selected" type="checkbox">
                        <label data-bind="text: $data.name, event: { click: $root.selectLocation }"></label>
                    </li>
                </ul>
            </div>
        </div>
        <div class="mycategories" group="controls" data-bind="visible:$root.showCategory">
            <div class="select">
                <h3 style="background-color:#6890C1;padding:5px;color:white">Choose multiple categories</h3>
                <select style="padding:15px;" data-bind="options: mapPlaceTypes, selectedOptions: myCategories" size="15" multiple="true"></select>
            </div>
        </div>
        <!-- button to hide or show the search result list -->
        <div class="hide-result" group="controls">
            <button type="core" data-bind="click: $root.toggleResults">
                <span style="font-size: 24px;"> ☷ </span>
            </button>
        </div>

    </div>

    <!-- place search result -->
    <div class="results container-fluide" group="controls" data-bind="visible: $root.showResults">
        <div class="info-header row">
            <div class="col-md-2">
                <img src="images/info.jpg" alt="info">
            </div>
            <div class="col-xs-12 col-md-10">
                <h2 data-bind="text: $root.myCity"></h2>
            </div>
        </div>

        <!--ul class="infolist" data-bind="foreach: $root.myLocations"-->
        <ul class="infolist" data-bind="foreach: $root.filteredLocations">
            <span data-bind="foreach: $data.nearByPlaces">
                <li data-bind="click: $root.clickMarker">
                    <!-- picture -->
                    <div class="col-md-4">
                        <div data-bind="if: $data.photos">
                            <img class="list-photo" data-bind="attr:{src: photos[0].getUrl({maxWidth: 80})}" alt="place-photo">
                        </div>
                        <div data-bind="ifnot: $data.photos">
                            <img class="list-photo" src="images/nophoto.jpg" alt="no-photo">
                        </div>
                    </div>
                    <!-- end picture -->
                    <!-- place information-->
                    <div class="col-sm-12 col-md-8">
                        <h3 class="longtext" data-bind="text: $data.name"></h3>
                        <p class="place-category"><span data-bind="text: $root.formattedType($data)"></span></p>
                        <p>
                            <div data-bind="if: $data.rating">
                            <div>
                                <span class="rating-number" data-bind="text: $data.rating"></span>
                                <div style="display: inline;" data-bind="foreach: $root.rateStar($data.rating)">
                                    <img class="rate-star" data-bind="attr:{src: star}" alt="*">
                                </div>
                            </div>
                            </div>
                            <span data-bind="ifnot: $data.rating">
                                <em>no rating available.</em>
                            </span>
                        </p>
                        <p class="place-address"><span data-bind="text: $root.getAddress($data)"></span></p>
                    </div>
                <!-- end of place inforantion -->
                </li>
            </span>
        </ul>
        <div class="logo">
            <span>powered by </span>
            <img src="images/googlelogo.jpg" alt="Google">
        </div>
    </div>
    <!-- Tools bar -->
    <div data-bind="visible: showResults">
        <div id="btn-toolbar" group="controls">
            <button type="core" class="btn" style="display: block" data-bind="click: $root.resetIcons">
                <span style="font-size: 24px;"> ↺ </span>
            </button>
            <div class="btn-group" data-bind="foreach: icons" role="group" aria-label="plane">
                <!--placeholder for filter buttons-->
                <button type="button" class="btn">
                    <img class="btn-toolbar-img" data-bind="click: $root.myIcons, attr: {src: icon}" alt="icon">
                </button>
                <br>
            </div>
            <button id="hide" type="core" class="btn" style="display: block">
                <span style="font-size:24px;">⊲</span>
            </button>
        </div>
    </div>
    <!-- end of place search result -->

    <!--Review page -->

    <div id="marker" style="display: none;">

        <div data-bind="visible: placeReviews().length">
            <div id="review-page" class="viewport">
                <button type="core" data-bind="click:$root.closeReview" class="navButton" group="closeButton" style="display: block">
                    <span style="font-size:24px;">⇦</span>
                </button>
                <div group="review-lists">
                    <div class="review-title" data-bind="with: placeInFocus">
                        <div class="longtext">
                            <span class="p2" data-bind="text: $data.name"></span>
                        </div>
                        <div style="float: left;">
                            <span class="rating-number" style="font-size: 16px;" data-bind="text: $data.rating"></span>
                            <div style="display: inline;" data-bind="foreach: $parent.rateStar($data.rating)">
                                <img style="height: 16px;" class="rate-star" data-bind="attr:{src: star}" alt="*">
                            </div>
                        </div>
                        <div class="greytext" data-bind="text: $data.formatted_address"> </div>
                    </div>
                    <ul class="list-review" data-bind="foreach: placeReviews">
                        <li>
                            <div>
                                <strong data-bind="text: $data.author_name"></strong>
                                <span class="rating-number" data-bind="text: $data.rating"></span>
                                <div style="display: inline;" data-bind="foreach: $parent.rateStar($data.rating)">
                                    <img class="rate-star" data-bind="attr:{src: star}" alt="*">
                                </div>
                            </div>
                            <div data-bind="text: $data.text"></div>
                        </li>
                    </ul>
                </div>
                <!-- container -->
            </div>
            <!-- viewport -->
        </div>
        <!--end review page -->

        <!-- Photos display -->
        <div id="photos-page" class="viewport" data-bind="visible: placePhotos().length">
            <button type="core" data-bind="click:$root.closePhoto" class="navButton" group="closeButton" style="display: block">
                <span style="font-size:24px;">⇦</span>
            </button>
            <div data-bind="with: currentPhoto">
                <img class="photo" data-bind="attr:{ src: getUrl({maxHeight: 800})}" alt="photo">
            </div>
            <div id="photoCounter">
                <span data-bind="text: photoIndex"></span>
                <span> / </span>
                <span data-bind="text: placePhotos().length"></span>
            </div>
            <button type="core" data-bind="click:$root.photoBackward" class="navButton" group="backward" style="display: block">
                <span style="font-size: 24px;">⊲</span>
            </button>
            <button type="core" data-bind="click:$root.photoForward" class="navButton" group="forward" style="display: block">
                <span style="font-size: 24px;">⊳</span>
            </button>
        </div>

        <!-- New york times page -->
        <div id="nytimes-page" class="viewport" data-bind="visible: nytarticles().length">
            <button type="core" data-bind="click:$root.closeNyt" class="navButton" group="closeButton" style="display: block">
                <span style="font-size:24px;">⇦</span>
            </button>

            <div class="Container" group="lists">
                <div class="review-title">
                    <span class="nytimes-header">New York Times Articles</span>
                    <span class="nytimes-header" data-bind="text:nytInFocus"></span>
                </div>
                <div class="mylist" data-bind="foreach: nytarticles">
                    <div>
                        <span class="article" style="padding:10px;" data-bind="html:$data">
                    </span></div>
                </div>
            </div>
        </div>
        <!--/div-->

        <!-- Wikipedia page -->
        <div id="wiki-page" class="viewport" data-bind="visible: wikiarticles().length">
            <button type="core" data-bind="click:$root.closeWiki" class="navButton" group="closeButton" style="display: block">
                  <span style="font-size:24px;">⇦</span>
            </button>
            <div class="Container" group="lists">
                <div class="review-title">
                    <span class="wiki-header">Wikipedia Articles</span>
                    <span class="wiki-header" data-bind="text:wikiInFocus"></span>
                </div>
                <div class="mylist" data-bind="foreach: wikiarticles">
                    <div>
                        <span class="article" style="padding: 5px;" data-bind="html:$data"></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- street view page -->
        <div data-bind="visible: showView">
            <div id="street-page" class="viewport">
                <button type="core" data-bind="click:$root.closeView" class="navButton" group="closeButton" style="display: block">
                     <span style="font-size:24px;">⇦</span>
                </button>

                <div id="streeview">
                    <img class="street-view" data-bind="attr:{src: streetView, alt: noimage}">
                </div>
            </div>
        </div>
    </div>
    <!-- custom alert box -->
    <div id="alertoverlay"></div>
    <div id="alertbox">
        <div>
            <div id="alertboxhead"></div>
            <div id="alertboxbody"></div>
            <div id="alertboxfoot"></div>
        </div>
    </div>

    <!-- html templates for infowindow -->
    <script id="review-long" type="text/template" data-template="review-long">
        <div id="infoWindow" class="infoWindow">
            <p class="longtext"><h3>{{name}}</h3></p>
            <hr>
            <p class="longtext"><span>{{formatted_address}} </span></p>
            <p><span class="opening">{{opening}}</span></p>
            <div id="wiki" style="white-space: normal;"><span></span></div>
            <hr>{{rating}} {{photos}}
            <p><span>{{phone}} </span></p>
            <p><div class="longtext"><a class="longtext" href="{{website}}" target="_blank">{{website}}<a></div></p>
            <hr style="background: #ffbccd;">
            <img style="width: 20px;" src= "images/NYT-logo.png"><a href="#" id="nytLink" style="display: inline;"> NYT articles</a>
            <span style="font-size :20px; color:black; font-weight: bold;">&#87;</span>
            <a href="#" id="wikiLink" style="display: inline;"> Wikipedia articles</a>
            <img style="width: 20px;" src="images/streetview.png"><a href="#" id="streetLink" style="display: inline;">View</a>
        </div>
    </script>
    <script id="review-short" type="text/template" data-template="review-short">
        <div id="infoWindow" class="infoWindow">
            <p class="longtext"> <h3>{{name}}</h3></p>
            <hr>
            <p class="longtext"><span>{{formatted_address}} </span></p>
            <div id="wiki" style="white-space: normal;"><span></span></div>
            <hr>{{rating}} {{photos}}
            <p><span>{{phone}} </span></p>
            <p><div class="longtext"><a class="longtext" href="{{website}}" target="_blank">{{website}}<a></div></p>
            <hr style="background: #ffbccd;">
            <span style="font-size :20px; color:black; font-weight: bold;">&#87;</span>
            <a href="#" id="wikiLink" style="display: inline;"> Wikipedia articles</a>
        </div>
    </script>

    <!-- template for newyork times page -->
    <script id="nytimes-temp" type="text/template" data-template="nytimes">
        <p class="article"><a href="{{articleUrl}}" target="_blank">{{headline}}</a></p>
    </script>
    <script id="wiki-temp" type="text/template" data-template="wiki">
        <p class="article"><a href="{{articleUrl}}" target="_blank">{{wikiarticle}}</p>
    </script>

    <!-- load scripts -->
    <script>
        (function (d) {
            var script = d.createElement('script');
            script.type = 'text/javascript';
            script.async = true;
            script.src = 'https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js';
            var s = d.scripts[0] ;
            s.parentNode.insertBefore(script, s);
        })(document);
    </script>

    <script type="text/javascript">
        // callback function when google Maps API is loaded
        var map,
        mapOptions = {
            center: {lat: 48.852729, lng: 2.350564},
            zoomControl: true,
            zoom: 14,
            minZoom: 2,
            maxZoom: 20,
            disableDefaultUI: true,
            streetViewControl: true
        },
        mapStyle = [{
            "featureType": "road.local",
            "elementType": "labels",
            "stylers": [{
                "hue": "#00a1ff"
            }, {
                "gamma": 0.8
            }]
            }, {
            "featureType": "road.highway",
            "stylers": [{
                "lightness": 12
            }, {
                "gamma": 1.31
            }, {
                "hue": "#ffa200"
            }]
            }, {
            "featureType": "landscape.natural"
            }];
        function initMap() {
            map = new google.maps.Map(document.querySelector('#map-canvas'), mapOptions);
            var styledMap = new google.maps.StyledMapType(mapStyle, {
                 name: "Styled Map"
            });
            map.mapTypes.set('map_style', styledMap);
            map.setMapTypeId('map_style');
            // append the app.js script  when the MAPS API is loaded
            (function(d) {
                var script = d.createElement('script');
                var s = d.scripts[d.scripts.length-1];
                script.src = 'js/app.js';
                script.defer = true;
                // script.setAttribute('defer',"");
                s.parentNode.insertBefore(script, s.nextSibling);
            })(document);
        }
    </script>
    <script type="text/javascript">
      WebFontConfig = {
        google: {
        families: ['Roboto:100,300']
      }
      };
      (function(d) {
       var wf = d.createElement('script'), s = d.scripts[0];
       wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js';
       s.parentNode.insertBefore(wf, s);
      })(document);
    </script>
    <!--script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script-->
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&callback=initMap" async></script>
    <!--script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js" async></script-->
    <!--script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" async></script-->
    <script type="text/javascript" src="js/gMaps.js" async></script>
  </body>

</html>