<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="Front-end developer Project 5">
    <!--link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"-->
    <style type="text/css">
.greytext,.longtext,li{text-overflow:ellipsis}*{font-family:Roboto,sans-serif}body,html{height:100%;margin:0;padding:0}button{width:32px;height:32px}h2{display:flex;margin:15px;font-size:22px;text-align:center}h3{font-size:15px;color:#5a6065;margin:1px}ul{list-style-type:none;padding:0;margin:0 3px;height:98%;overflow-y:scroll}li{background-color:#f1f1f1;padding:10px;overflow:hidden}p{margin:0 0 0 6px}strong{color:#787676}[group~=controls]{position:absolute;background-color:#fff}[group~=hz-buttons]{z-index:105;top:0;margin:0 5px;display:inline;position:absolute;left:50%}[group~=backward],[group~=closeButton],[group~=forward]{cursor:pointer;position:absolute;width:40px;z-index:110}[group~=lists],[group~=review-lists]{position:absolute;background-color:#fffae3;top:40px;height:90%;left:10%}[group~=review-lists]{padding:10px;max-width:80%}[group~=lists]{padding:10px 20px 0;max-width:60%;font-size:16px}[group~=closeButton]{top:50px;left:20px;height:40px}[group~=backward],[group~=forward]{height:40px;top:50%}[group~=backward]{left:15%}[group~=forward]{right:15%}[type~=core]{background-color:#4b86b4;color:#fff;height:40px;width:40px;margin:0;padding:0;border:none}#search-input{width:100%}#map-canvas{height:100%}#search-box{display:inline;width:45%;line-height:32px;top:0;left:5%;z-index:105}.article,.select{display:block}#photoCounter{width:20%;font-size:25px;color:#000;left:45%;position:absolute;z-index:110;bottom:5%;cursor:pointer}.infolist li,.list-review li{cursor:pointer;color:#989696}#btn-toolbar{left:2px;bottom:7%;background-color:#8bb2d2;border:0}.mycategories,.results{border-radius:5px}.p2{font-size:20px;padding:10px;font-weight:700}.review-title{font-size:15px;height:10%}.results{width:25%;height:72%;z-index:105;position:fixed;top:0;right:0;background-color:#fff;box-shadow:0 2px 6px rgba(0,0,0,.3)}.hide-result{z-index:105;top:0;right:10px}.mylist{overflow-y:scroll;max-height:80%}.mylist::-webkit-scrollbar{width:12px;overflow:visible;margin:10px;background-color:#fff}.mylist::-webkit-scrollbar-thumb{background-color:#4b86b4;height:20px;box-shadow:inset 1px 1px 0 rgba(0,0,0,.2),inset 0 -1px 0 rgba(0,0,0,.1)}.viewport{width:100%;height:100%;position:absolute;z-index:106;top:0;background:-moz-linear-gradient(left,rgba(216,224,222,.6) 10%,rgba(189,203,200,.65) 14%,rgba(174,191,188,.7) 22%,rgba(153,175,171,.75) 33%,rgba(142,166,162,.8) 50%,rgba(130,157,152,.85) 67%,rgba(78,92,90,.89) 82%,rgba(14,14,14,1) 100%);background:-webkit-linear-gradient(left,rgba(216,224,222,.6) 10%,rgba(189,203,200,.65) 14%,rgba(174,191,188,.7) 22%,rgba(153,175,171,.75) 33%,rgba(142,166,162,.8) 50%,rgba(130,157,152,.85) 67%,rgba(78,92,90,.89) 82%,rgba(14,14,14,1) 100%);background:linear-gradient(to right,rgba(216,224,222,.6) 10%,rgba(189,203,200,.65) 14%,rgba(174,191,188,.7) 22%,rgba(153,175,171,.75) 33%,rgba(142,166,162,.8) 50%,rgba(130,157,152,.85) 67%,rgba(78,92,90,.89) 82%,rgba(14,14,14,1) 100%)}.btn-toolbar-img{margin:5px}.longtext{white-space:nowrap;overflow:hidden;font-size:16px}.infolist,.list-review{overflow-x:hidden;overflow-y:scroll;padding:2px}.article{font-size:18px}.infolist{font-size:13px;max-height:72%;margin:5px 0}img.photo,img.street-view{display:block;position:absolute;margin-left:auto;margin-right:auto}.list-review{font-size:14px}.greytext,.info-header{font-size:16px}.infolist::-webkit-scrollbar,.infolist::-webkit-scrollbar-thumb,.list-review::-webkit-scrollbar,.list-review::-webkit-scrollbar-thumb{background-color:#4b86b4;height:30px;box-shadow:inset 1px 1px 0 rgba(0,0,0,.2),inset 0 -1px 0 rgba(0,0,0,.1)}.infolist li{padding:0 2px 3px;margin-bottom:4px}.list-review li{padding:2px 2px 3px;margin-bottom:6px;background-color:#fffae3}.col-md-8{padding-left:5px;height:inherit}.col-md-4{padding-right:5px;height:inherit}img.photo{max-height:60%;max-width:60%;top:25%;left:20%}img.street-view{max-height:80%;max-width:80%;top:10%;left:10%}.navButton{width:32px;height:32px;position:absolute;z-index:110;cursor:pointer}.btn-toolbar-img{width:20px}.btn{padding:4px;width:40px}.rate-star{height:14px;padding:1px 0 2px}.rating-number{color:#df6d15;padding-right:3px;vertical-align:middle;margin-left:6px}.greytext{overflow:hidden;float:left;color:#989696;vertical-align:middle;margin-left:20px;padding-bottom:15px}.row{margin-top:3px}.list-review{width:95%;height:70%;margin:0 2.5%}.list-photo{width:100%}.logo{float:right;font-size:11px;color:#767676;margin-top:15px}#location,.mycategories{padding:0;margin:0;top:5%;left:40%;z-index:106}.nytimes-header,.wiki-header{font-size:16px;font-weight:700}#location{display:-webkit-flex;display:flex;-webkit-flex-direction:row;width:30%;max-width:250px;height:230px;font-size:14px}#location-list{background-color:#fffae3;width:100%;height:100%;list-style:none}#location-list li{position:relative;font-size:14px;border-bottom:2px solid #ededed}#location-list li label{color:#a9a9a9;white-space:pre-line;word-break:break-all;padding:0 0 0 10px;margin-left:35px;line-height:1.2;transition:color .4s}#location-list li .toggle{text-align:center;width:24px;height:auto;position:absolute;top:0;bottom:0;margin:auto 0;border:none;-webkit-appearance:none;appearance:none}#location-list li .toggle:after{content:url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="40" height="40" viewBox="-10 -18 100 135"><circle cx="50" cy="50" r="50" fill="none" stroke="#ededed" stroke-width="3"/></svg>')}#location-list li .destroy{display:none;position:absolute;top:0;right:10px;bottom:0;width:26px;height:26px;margin:auto 0 5px;font-size:18px;color:#cc9a9a;transition:color .2s ease-out}#alertbox,#alertoverlay{display:none;position:fixed;z-index:110}#location-list li .destroy:after{content:'✖'}#alertoverlay{opacity:.8;top:0;left:0;background:#FFF;width:100%}#alertbox{background:#000;border-radius:7px;top:30%;left:25%;width:50%}#alertbox>div{background:#FFF;margin:8px}#alertbox>div>#alertboxhead{background:#4b86b4;font-size:19px;padding:10px;color:#CCC}#alertbox>div>#alertboxbody{background:#333;padding:20px;color:#FFF}#alertbox>div>#alertboxfoot{background:#4b86b4;padding:10px;text-align:right}@media screen and (min-width:1170px){#photoCounter{bottom:2%;font-size:18px}.col-md-2,.col-md-4{display:none}#btn-toolbar{bottom:7%}.btn-toolbar-img{width:20px}.btn{padding:5px}.infolist{max-height:65%;font-size:11px}.article,.nytimes-header,.wiki-header{font-size:14px}.p2{font-size:18px;font-weight:700}h2,h3{font-size:1.1em}.results{width:27%;max-width:350px;height:65%}[type~=core]{background-color:#4b86b4;color:#fff;height:35px;width:35px}#location{left:15%;width:70%}.info-header,[group~=lists]{font-size:14px}.review-title{font-size:13px;height:10%}button{width:26px;height:26px}}
</style>
<script>
(function(u){function loadCSS(e,t,n){"use strict";function r(){for(var t,i=0;i<d.length;i++)d[i].href&&d[i].href.indexOf(e)>-1&&(t=!0);t?o.media=n||"all":setTimeout(r)}var o=window.document.createElement("link"),i=t||window.document.getElementsByTagName("script")[0],d=window.document.styleSheets;return o.rel="stylesheet",o.href=e,o.media="only x",i.parentNode.insertBefore(o,i),r(),o}for(var i in u){loadCSS(u[i]);}}(['css/bootstrap.min.css','css/style.css']));
</script>
<noscript>
<link rel="stylesheet" type="text/css" href="css/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="css/style.css" media="screen" title="no title">
</noscript>
    
    <meta name="author" content="Paul Matencio">
    <title>Project 5 Neighborhood-Map</title>
</head>

<body>
    <!--div tag that holds the google map-->
    <div id="map-canvas"></div>

    <!--  search box -->
    <div id="search-box" group="controls">
        <input id="search-input" type="text" data-bind="value: keyword, valueUpdate: 'afterkeydown', enterKey: getPlace" placeholder="Looking for places (separated by blank)  or :location ...">
    </div>
    <div group="hz-buttons">
        <button type="core" data-bind="click: $root.toggleLocation" class="hz-button">
            <span style="font-size: 24px;"> ☰</span>
        </button>
        <button type="core" data-bind="click: $root.toggleCategory" class="hz-button">
            <span style="font-size: 24px;"> ☷ </span>
        </button>
        <!--button type="core" data-bind="click: $root.resetIcons" class="hz-button">
             <span> ⚡⚡</span>
        </button-->
    </div>

    <div id="options" style="display: none;">
        <!-- location list-->
        <div data-bind="visible: $root.showLocation || Locations().length > 0">
            <div id="location" group="controls">
                <ul id="location-list" group="controls" data-bind="foreach: $root.filteredLocations">
                    <span data-bind="with:$parent.displayLocation($data)"></span>
                    <li data-bind="css:{selected:selected}">
                        <button class="destroy" data-bind="click: $root.removeLocation"></button>
                        <input class="toggle" data-bind="checked: $data.selected" type="checkbox">
                        <label data-bind="text: $data.name, event: { click: $root.selectLocation }"></label>
                    </li>
                </ul>
            </div>
        </div>
        <div class="mycategories" group="controls" data-bind="visible:$root.showCategory">
            <div class="select">
                <h3 style="background-color:#6890C1;padding:5px;color:white">Choose multiple categories</h3>
                <select style="padding:15px;" data-bind="options: mapPlaceTypes, selectedOptions: myCategories" size="15" multiple="true"></select>
            </div>
        </div>
        <!-- button to hide or show the search result list -->
        <div class="hide-result" group="controls">
            <button type="core" data-bind="click: $root.toggleResults">
                <span style="font-size: 24px;"> ☷ </span>
            </button>
        </div>

    </div>
    <!-- button to hide or show the search result list -->
    <!--div class="hide-result" group="controls">
        <a data-bind="click: $root.toggleResults">
            <svg xmls="http://www/w3/org/2000/svg" viewbox="0 0 24 24">
                <path d="M2 6h20v3H2zm0 5h20v3H2zm0 5h20v3H2z"></path>
            </svg>
        </a>
    </div-->

    <!-- place search result -->
    <div class="results container-fluide" group="controls" data-bind="visible: $root.showResults">
        <div class="info-header row">
            <div class="col-md-2">
                <img src="images/info.jpg" alt="info">
            </div>
            <div class="col-xs-12 col-md-10">
                <h2 data-bind="text: $root.myCity"></h2>
            </div>
        </div>

        <!--ul class="infolist" data-bind="foreach: $root.myLocations"-->
        <ul class="infolist" data-bind="foreach: $root.filteredLocations">
            <span data-bind="foreach: $data.nearByPlaces">
                <li data-bind="click: $root.clickMarker">
                    <!-- picture -->
                    <div class="col-md-4">
                        <div data-bind="if: $data.photos">
                            <img class="list-photo" data-bind="attr:{src: photos[0].getUrl({maxWidth: 80})}" alt="place-photo">
                        </div>
                        <div data-bind="ifnot: $data.photos">
                            <img class="list-photo" src="images/nophoto.jpg" alt="no-photo">
                        </div>
                    </div>
                    <!-- end picture -->
                    <!-- place information-->
                    <div class="col-sm-12 col-md-8">
                        <h3 class="longtext" data-bind="text: $data.name"></h3>
                        <p class="place-category"><span data-bind="text: $root.formattedType($data)"></span></p>
                        <p>
                            <div data-bind="if: $data.rating">
                            <div>
                                <span class="rating-number" data-bind="text: $data.rating"></span>
                                <div style="display: inline;" data-bind="foreach: $root.rateStar($data.rating)">
                                    <img class="rate-star" data-bind="attr:{src: star}" alt="*">
                                </div>
                            </div>
                            </div>
                            <span data-bind="ifnot: $data.rating">
                                <em>no rating available.</em>
                            </span>
                        </p>
                        <p class="place-address"><span data-bind="text: $root.getAddress($data)"></span></p>
                    </div>
                <!-- end of place inforantion -->
                </li>
            </span>
        </ul>
        <div class="logo">
            <span>powered by </span>
            <img src="images/googlelogo.jpg" alt="Google">
        </div>
    </div>
    <!-- Tools bar -->
    <div data-bind="visible: showResults">
        <div id="btn-toolbar" group="controls">
            <button type="core" class="btn" style="display: block" data-bind="click: $root.resetIcons"> 
                <span style="font-size: 24px;"> ↺ </span>
            </button>
            <div class="btn-group" data-bind="foreach: icons" role="group" aria-label="plane">
                <!--placeholder for filter buttons-->
                <button type="button" class="btn">
                    <img class="btn-toolbar-img" data-bind="click: $root.myIcons, attr: {src: icon}" alt="icon">
                </button>
                <br>
            </div>
            <button id="hide" type="core" class="btn" style="display: block">
                <span style="font-size:24px;">⊲</span>
            </button>
        </div>
    </div>
    <!-- end of place search result -->

    <!--Review page -->

    <div id="marker" style="display: none;">

        <div data-bind="visible: placeReviews().length">
            <div id="review-page" class="viewport">
                <button type="core" data-bind="click:$root.closeReview" class="navButton" group="closeButton" style="display: block">
                    <span style="font-size:24px;">⇦</span>
                </button>
                <div group="review-lists">
                    <div class="review-title" data-bind="with: placeInFocus">
                        <div class="longtext">
                            <span class="p2" data-bind="text: $data.name"></span>
                        </div>
                        <div style="float: left;">
                            <span class="rating-number" style="font-size: 16px;" data-bind="text: $data.rating"></span>
                            <div style="display: inline;" data-bind="foreach: $parent.rateStar($data.rating)">
                                <img style="height: 16px;" class="rate-star" data-bind="attr:{src: star}" alt="*">
                            </div>
                        </div>
                        <div class="greytext" data-bind="text: $data.formatted_address"> </div>
                    </div>
                    <ul class="list-review" data-bind="foreach: placeReviews">
                        <li>
                            <div>
                                <strong data-bind="text: $data.author_name"></strong>
                                <span class="rating-number" data-bind="text: $data.rating"></span>
                                <div style="display: inline;" data-bind="foreach: $parent.rateStar($data.rating)">
                                    <img class="rate-star" data-bind="attr:{src: star}" alt="*">
                                </div>
                            </div>
                            <div data-bind="text: $data.text"></div>
                        </li>
                    </ul>
                </div>
                <!-- container -->
            </div>
            <!-- viewport -->
        </div>
        <!--end review page -->

        <!-- Photos display -->
        <div id="photos-page" class="viewport" data-bind="visible: placePhotos().length">
            <button type="core" data-bind="click:$root.closePhoto" class="navButton" group="closeButton" style="display: block">
                <span style="font-size:24px;">⇦</span>
            </button>
            <div data-bind="with: currentPhoto">
                <img class="photo" data-bind="attr:{ src: getUrl({maxHeight: 800})}" alt="photo">
            </div>
            <div id="photoCounter">
                <span data-bind="text: photoIndex"></span>
                <span> / </span>
                <span data-bind="text: placePhotos().length"></span>
            </div>
            <button type="core" data-bind="click:$root.photoBackward" class="navButton" group="backward" style="display: block">
                <span style="font-size: 24px;">⊲</span>
            </button>
            <button type="core" data-bind="click:$root.photoForward" class="navButton" group="forward" style="display: block">
                <span style="font-size: 24px;">⊳</span>
            </button>
        </div>

        <!-- New york times page -->
        <div id="nytimes-page" class="viewport" data-bind="visible: nytarticles().length">
            <button type="core" data-bind="click:$root.closeNyt" class="navButton" group="closeButton" style="display: block">
                <span style="font-size:24px;">⇦</span>
            </button>

            <div class="Container" group="lists">
                <div class="review-title">
                    <span class="nytimes-header">New York Times Articles</span>
                    <span class="nytimes-header" data-bind="text:nytInFocus"></span>
                </div>
                <div class="mylist" data-bind="foreach: nytarticles">
                    <div>
                        <!--span class="review list-group-item" data-bind="html:$data"></span-->
                        <span class="article" style="padding:10px;" data-bind="html:$data">
                    </span></div>
                </div>
            </div>
        </div>
        <!--/div-->

        <!-- Wikipedia page -->
        <div id="wiki-page" class="viewport" data-bind="visible: wikiarticles().length">
            <button type="core" data-bind="click:$root.closeWiki" class="navButton" group="closeButton" style="display: block">
                  <span style="font-size:24px;">⇦</span>
            </button>
            <div class="Container" group="lists">
                <div class="review-title">
                    <span class="wiki-header">Wikipedia Articles</span>
                    <span class="wiki-header" data-bind="text:wikiInFocus"></span>
                </div>
                <div class="mylist" data-bind="foreach: wikiarticles">
                    <div>
                        <span class="article" style="padding: 5px;" data-bind="html:$data"></span>
                    </div>
                </div>
            </div>
        </div>
        <!-- street view page -->
        <div data-bind="visible: showView">
            <div id="street-page" class="viewport">
                <button type="core" data-bind="click:$root.closeView" class="navButton" group="closeButton" style="display: block">
                     <span style="font-size:24px;">⇦</span>
                </button>

                <div id="streeview">
                    <img class="street-view" data-bind="attr:{src: streetView, alt: noimage}">
                </div>
            </div>
        </div>
    </div>
    <!-- custom alert box -->
    <div id="alertoverlay"></div>
    <div id="alertbox">
        <div>
            <div id="alertboxhead"></div>
            <div id="alertboxbody"></div>
            <div id="alertboxfoot"></div>
        </div>
    </div>

    <!-- template scripts  for reviews page-->
    <script id="review-long" type="text/template" data-template="review-long">
        <div id="infoWindow" class="infoWindow">
            <p class="longtext">
                <h3>{{name}}</h3>
            </p>
            <hr>
            <p class="longtext"><span>{{formatted_address}} </span>
            </p>
            <p><span class="opening">{{opening}}</span>
            </p>
            <div id="wiki" style="white-space: normal;"><span></span>
            </div>
            <hr>{{rating}} {{photos}}
        </div>
        </p>
        <p><span>{{phone}} </span>
        </p>
        <p>
            <div class="longtext"><a class="longtext" href="{{website}}" target="_blank">{{website}}<a></div></p>
        <hr style="background: #ffbccd;">
        <img style="width: 20px;" src= "images/NYT-logo.png"><a href="#" id="nytLink" style="display: inline;"> NYT articles</a>
                <span style="font-size :20px; color:black; font-weight: bold;">&#87;</span><a href="#" id="wikiLink" style="display: inline;"> Wikipedia articles</a>
                <img style="width: 20px;" src="images/streetview.png"><a href="#" id="streetLink" style="display: inline;">View</a>
            </div>
    </script>
    <script id="review-short" type="text/template" data-template="review-short">
        <div id="infoWindow" class="infoWindow">
            <p class="longtext">
                <h3>{{name}}</h3>
            </p>
            <hr>
            <p class="longtext"><span>{{formatted_address}} </span>
            </p>
            <div id="wiki" style="white-space: normal;"><span></span>
            </div>
            <hr>{{rating}} {{photos}}
        </div>
        </p>
        <p><span>{{phone}} </span>
        </p>
        <p>
            <div class="longtext"><a class="longtext" href="{{website}}" target="_blank">{{website}}<a></div></p>
        <hr style="background: #ffbccd;">
        <span style="font-size :20px; color:black; font-weight: bold;">&#87;</span><a href="#" id="wikiLink" style="display: inline;"> Wikipedia articles</a>
            </div>
    </script>
    <!-- template for newyork times page -->
    <script type="text/template" data-template="nytimes">
        <p class="article"><a href="{{articleUrl}}" target="_blank">{{headline}}</a>
        </p>
    </script>
    <script type="text/template" data-template="wiki">
        <p class="article"><a href="{{articleUrl}}" target="_blank">{{wikiarticle}}</p>
    </script>
    <!-- load scripts -->
    <!--script>
        (function () {
            var script = document.createElement(s);
            script.type = 'text/javascript';
            script.async = true;
            script.src = 'jquery.js';
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(script, s);
        })();
    </script-->

    <script type="text/javascript">
        // callback function when google Maps API is loaded
        var map,
        mapOptions = {
            center: {lat: 48.852729, lng: 2.350564},
            zoomControl: true,
            zoom: 14,
            minZoom: 2,
            maxZoom: 20,
            disableDefaultUI: true,
            streetViewControl: true
        },
        mapStyle = [{
            "featureType": "road.local",
            "elementType": "labels",
            "stylers": [{
                "hue": "#00a1ff"
            }, {
                "gamma": 0.8
            }]
            }, {
            "featureType": "road.highway",
            "stylers": [{
                "lightness": 12
            }, {
                "gamma": 1.31
            }, {
                "hue": "#ffa200"
            }]
            }, {
            "featureType": "landscape.natural"
            }];
        function initMap() {
            map = new google.maps.Map(document.querySelector('#map-canvas'), mapOptions);
            var styledMap = new google.maps.StyledMapType(mapStyle, {
                 name: "Styled Map"
            });
            map.mapTypes.set('map_style', styledMap);
            map.setMapTypeId('map_style');
            // append the app.js script  when the MAPS API is loaded
            (function(d) {
                var script = d.createElement('script');
                var s = d.scripts[d.scripts.length-1];
                script.src = 'js/app.js';
                script.defer = true;
                // script.setAttribute('defer',"");
                s.parentNode.insertBefore(script, s.nextSibling);
            })(document);
        }
    </script>
    <script type="text/javascript">
      WebFontConfig = {
        google: {
        families: ['Roboto:100,300']
      }
      };
      (function(d) {
       var wf = d.createElement('script'), s = d.scripts[0];
       wf.src = 'https://ajax.googleapis.com/ajax/libs/webfont/1.5.18/webfont.js';
       s.parentNode.insertBefore(wf, s);
      })(document);
    </script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=places&callback=initMap" async></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js" async></script>
    <!--script type="text/javascript" src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js" async></script-->
    <script type="text/javascript" src="js/gMaps.js"></script>
  </body>

</html>